<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="board">
  	<select id ="boardList" resultType="boardDTO">
  		SELECT board_no, board_title, board_write, board_date, board_count, comment 
  		FROM boardview 
  		LIMIT 0, 10
  	</select>
  	
  	<select id="detail" resultType="boardDTO" parameterType="Integer">
  		SELECT b.board_no, b.board_title, b.board_content, m.mid AS board_write, b.board_date, b.board_ip, b.board_del 
  		FROM board b join member m ON b.mno=m.mno
  		WHERE board_no=#{no} AND board_del='1'
  	</select>
  	
  	<insert id="write" parameterType="writeDTO">
  		INSERT INTO board (board_title, board_content, mno)
  		VALUES (#{title}, #{content}, (SELECT mno FROM member WHERE mid=#{mid}))
  		<selectKey resultType="Int" keyProperty="board_no" order="AFTER">
  			SELECT LAST_INSERT_ID()
  		</selectKey>
  	</insert>
  </mapper>